{"spans": [{"name": "run_tool_agent", "context": {"span_id": "0xaf0499b4adbb2ce1", "trace_id": "0xc1b15a8c56b41e036d8fd1abcb31ccfd"}, "parent_id": null, "start_time": 1741507597234190000, "end_time": 1741507599155408600, "status_code": "ERROR", "status_message": "NameError: name 'json' is not defined", "attributes": {"mlflow.traceRequestId": "\"9fc0b2697a8d4f5faf6660118a99df8e\"", "mlflow.spanType": "\"AGENT\"", "mlflow.spanFunctionName": "\"run_tool_agent\"", "mlflow.spanInputs": "{\"question\": \"What's the weather like in Paris today?\"}"}, "events": [{"name": "exception", "timestamp": 1741507599155377000, "attributes": {"exception.type": "NameError", "exception.message": "name 'json' is not defined", "exception.stacktrace": "Traceback (most recent call last):\n  File \"c:\\Users\\rozak\\Downloads\\projects\\Learn_MLFlow\\.venv\\Lib\\site-packages\\opentelemetry\\trace\\__init__.py\", line 589, in use_span\n    yield span\n  File \"c:\\Users\\rozak\\Downloads\\projects\\Learn_MLFlow\\.venv\\Lib\\site-packages\\mlflow\\tracing\\fluent.py\", line 449, in start_span\n    yield mlflow_span\n  File \"c:\\Users\\rozak\\Downloads\\projects\\Learn_MLFlow\\.venv\\Lib\\site-packages\\mlflow\\tracing\\fluent.py\", line 196, in _wrapping_logic\n    result = yield  # sync/async function output to be sent here\n             ^^^^^\n  File \"c:\\Users\\rozak\\Downloads\\projects\\Learn_MLFlow\\.venv\\Lib\\site-packages\\mlflow\\tracing\\fluent.py\", line 225, in wrapper\n    return wrapping_coro.send(fn(*args, **kwargs))\n                              ~~^^^^^^^^^^^^^^^^^\n  File \"C:\\Users\\rozak\\AppData\\Local\\Temp\\ipykernel_20348\\2844571086.py\", line 52, in run_tool_agent\n    args = json.loads(tool_call.function.arguments)\n           ^^^^\nNameError: name 'json' is not defined. Did you forget to import 'json'?\n", "exception.escaped": "False"}}]}, {"name": "Completions", "context": {"span_id": "0x245fc3275acaff90", "trace_id": "0xc1b15a8c56b41e036d8fd1abcb31ccfd"}, "parent_id": "0xaf0499b4adbb2ce1", "start_time": 1741507598267652300, "end_time": 1741507599153078000, "status_code": "OK", "status_message": "", "attributes": {"mlflow.traceRequestId": "\"9fc0b2697a8d4f5faf6660118a99df8e\"", "mlflow.spanType": "\"CHAT_MODEL\"", "model": "\"gpt-4o-mini\"", "tools": "[{\"type\": \"function\", \"function\": {\"name\": \"get_weather\", \"parameters\": {\"type\": \"object\", \"properties\": {\"city\": {\"type\": \"string\"}}}}}]", "mlflow.spanInputs": "{\"model\": \"gpt-4o-mini\", \"messages\": [{\"role\": \"user\", \"content\": \"What's the weather like in Paris today?\"}], \"tools\": [{\"type\": \"function\", \"function\": {\"name\": \"get_weather\", \"parameters\": {\"type\": \"object\", \"properties\": {\"city\": {\"type\": \"string\"}}}}}]}", "mlflow.chat.messages": "[{\"role\": \"user\", \"content\": \"What's the weather like in Paris today?\"}, {\"content\": null, \"refusal\": null, \"role\": \"assistant\", \"tool_calls\": [{\"id\": \"call_yKVt8fcdo3pBWhExadyhAZSL\", \"function\": {\"arguments\": \"{\\\"city\\\":\\\"Paris\\\"}\", \"name\": \"get_weather\"}, \"type\": \"function\"}]}]", "mlflow.chat.tools": "[{\"type\": \"function\", \"function\": {\"name\": \"get_weather\", \"parameters\": {\"type\": \"object\", \"properties\": {\"city\": {\"type\": \"string\"}}}}}]", "mlflow.spanOutputs": "{\"id\": \"chatcmpl-B95yJWP7aSA56qaeBs7Oz3pZVRHxz\", \"choices\": [{\"finish_reason\": \"tool_calls\", \"index\": 0, \"logprobs\": null, \"message\": {\"content\": null, \"refusal\": null, \"role\": \"assistant\", \"audio\": null, \"function_call\": null, \"tool_calls\": [{\"id\": \"call_yKVt8fcdo3pBWhExadyhAZSL\", \"function\": {\"arguments\": \"{\\\"city\\\":\\\"Paris\\\"}\", \"name\": \"get_weather\"}, \"type\": \"function\"}]}}], \"created\": 1741507607, \"model\": \"gpt-4o-mini-2024-07-18\", \"object\": \"chat.completion\", \"service_tier\": \"default\", \"system_fingerprint\": \"fp_06737a9306\", \"usage\": {\"completion_tokens\": 15, \"prompt_tokens\": 45, \"total_tokens\": 60, \"completion_tokens_details\": {\"accepted_prediction_tokens\": 0, \"audio_tokens\": 0, \"reasoning_tokens\": 0, \"rejected_prediction_tokens\": 0}, \"prompt_tokens_details\": {\"audio_tokens\": 0, \"cached_tokens\": 0}}}"}, "events": []}], "request": "{\"question\": \"What's the weather like in Paris today?\"}", "response": null}